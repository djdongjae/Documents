# AWS EC2

### 1. EC2 세팅

---

#### 1.1 AWS Region 설정하기

우측 상단에 AWS의 리전이 서울로 설정 되어있는지 확인합니다. 서울이 아니라면 **아시아 태평양 서울**로 변경하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 6.07.56 PM.png>)


#### 1.2 EC2 인스턴스 생성하기

검색창에 'EC2'를 입력하고 EC2 대시보드를 선택하고 인스턴스 시작하기 버튼을 클릭합니다.

<br>

![alt text](<Screenshot 2024-06-01 at 6.40.17 PM.png>)

<br>

![alt text](<Screenshot 2024-06-01 at 6.56.05 PM.png>)

<br>

인스턴스에 적당한 이름을 설정하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 7.10.50 PM.png>)

<br>

다음으로 AMI를 설정하여 줍니다. 여기서는 **Amazon Linux**의 **Amazon Linux 2023 AMI**를 선택합니다. 아키텍처는 **64비트(x86)** 을 선택하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 7.17.05 PM.png>)

<br>

다음은 인스턴스 유형을 선택하는 단계입니다. 인스턴스 유형에서는 프리티어로 표기된 **t2.micro**를 선택합니다.

<br>

![alt text](<Screenshot 2024-06-01 at 7.23.41 PM.png>)

<br>

인스턴스로 접근하기 위해서는 비밀 키가 필요합니다. 인스턴스는 지정된 pem 키(비밀키)와 매칭되는 공개키를 가지고 있어서 해당 pem 키 외에는 접근을 허용하지 않습니다. `새 키 페어 생성`을 클릭하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 7.31.35 PM.png>)

<br>

다음과 같이 키페어에 적당한 이름을 설정하고, RSA 유형의 .pem 키 파일을 생성하고 다운로드 받아줍니다. 한 번 다운받은 키 파일은 두 번 다시 다운받을 수 없기 때문에 보관 위치를 잘 기억합니다.

<br>

![alt text](<Screenshot 2024-06-01 at 7.47.42 PM.png>)

<br>

다음 네트워크 설정에서는 추후에 다시 설정할 것이기 때문에 지금은 별다른 설정 없이 넘어갑니다.

<br>

![alt text](<Screenshot 2024-06-01 at 10.39.02 PM.png>)

<br>

다음 단계는 스토리지 구성입니다. 스토리지는 여러분이 흔히 하드디스크라고 부르는 서버의 디스크를 이야기하며 서버의 용량을 설정하는 단계입니다. 기본값 설정은 8GB이지만 30GB까지 프리티어로 가능하므로 변경하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 10.45.14 PM.png>)

<br>

요약이 아래 화면과 같다면 인스턴스 시작 버튼을 눌러줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 10.48.43 PM.png>)

<br>

인스턴스 탭으로 이동해 보면 정상적으로 인스턴스가 생성된 것을 확인할 수 있습니다.

<br>

![alt text](<Screenshot 2024-06-01 at 10.57.12 PM.png>)

#### 1.2 보안 그룹 설정하기

보안 그룹은 방화벽을 이야기합니다. **서버로 8080포트 이외의 요청은 허용하지 않는다** 는 역할을 하는 방화벽이 AWS에서는 보안 그룹으로 사용됩니다.

> ✅ **인바운드 규칙(inbound)** : 외부에서 EC2나 RDS 등의 내부로 접근할때 사용되는 방화벽 규칙
> ✅ **아웃바운드 규칙(outbound)** : EC2나 RDS 등의 내부에서 외부로 접근할때 사용되는 방화벽 규칙

저희는 EC2에 접속해서 서버를 띄우는 것이 목적이기 때문에 인바운드 규칙만 설정해 보겠습니다. 좌측 **네트워크 및 보안 그룹 탭에서 보안 그룹**을 선택해 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 11.10.57 PM.png>)

<br>

상단의 **보안 그룹 생성** 버튼을 클릭하여 줍니다.

<br>

![alt text](<Screenshot 2024-06-01 at 11.14.26 PM.png>)

<br>

보안 그룹에 적당한 이름을 적고 하단의 인바운드 규칙 추가 버튼을 클릭합니다.

<br>

![alt text](<Screenshot 2024-06-01 at 11.21.01 PM.png>)

<br>

아래 화면과 같이 총 4개의 규칙을 추가합니다. 규칙에 대한 설명은 아래와 같습니다.

* **8080**: 스프링 부트 기반의 서버를 열어줄 것이기 때문에 사용자 지정으로 8080 포트를 개방하고 URL을 아는 누구나 접속할 수 있도록 Anywhere-IPV4로 설정합니다.
* **22(SSH)**: 현재 사용 중인 컴퓨터에서 서버로 접속하고자 할 때 사용합니다. Anywhere-IPV4로 SSH 트래픽을 허용해야 집에 아니라 카페, 강의실과 같은 곳에서도 접속이 가능합니다.
* **80(HTTP)**: HTTP 연결 시 사용됩니다.
* **433(HTTPS)**: HTTPS 연결 시 사용합니다.

<br>

![alt text](<Screenshot 2024-06-01 at 11.27.54 PM.png>)
